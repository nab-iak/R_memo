加???包和数据
```{r}
library(tidyverse)
dt <- read.csv("?/PycharmProjects/R_memo/data/glue.csv")
dt <- dt %>%
  arrange(Model)
dt
```

?????????
```{r}
dt_wider1 <- dt %>%
                pivot_wider(
                  id_cols = "Model",
                  names_from = c("Task","Encoder","Year"),
                  values_from = "Score",
                  names_sep="_"
                )
dt_wider1
```
???成原来的???子
由于???原的???候不是???一列都包含???的，例如出???了没有的年???
因此注意用na.omit()清除一下
```{r}
dt_longer1 <- dt_wider1 %>%
                  pivot_longer(
                    cols = matches("_"),
                    names_to = c("Task","Encoder","Year"),
                    names_pattern = "(.*)_(.*)_(.*)",
                    values_to = "Score"
                  )

dt_longer1
```

保留Task的分???到列
```{r}
dt_longer1_2 <- dt_wider1 %>%
                  pivot_longer(
                    cols = matches("_"),
                    names_to = c(".value","Encoder","Year"),
                    names_pattern = "(.*)_(.*)_(.*)",
                    values_to = "Score"
                  ) %>%
                  arrange(Model) %>%
                  na.omit()
dt_longer1_2
```

只把???个??????
```{r}
dt_wider2 <- dt %>%
                pivot_wider(
                  id_cols = c("Model","Task"),
                  names_from = c("Encoder","Year"),
                  values_from = "Score",
                  names_sep="_"
                ) 
dt_wider2
```


```{r}
dt_longer2 <- dt_wider2 %>%
                  pivot_longer(
                    cols = matches("_"),
                    names_to = c("Encoder","Year"),
                    names_pattern = "(.*)_(.*)",
                    values_to = "Score"
                  ) %>%
                  arrange(Model) %>%
                  na.omit()
dt_longer2
```

