- library package and import data
```{r}
library(tidyverse)
dt <- read.csv("~/PycharmProjects/R_memo/data/glue.csv")
dt <- dt %>%
  arrange(Model)
dt
```

wider the dataset
```{r}
dt_wider1 <- dt %>%
                pivot_wider(
                  id_cols = "Model",
                  names_from = c("Task","Encoder","Year"),
                  values_from = "Score",
                  names_sep="_"
                )
dt_wider1
```

restore the widerred dataset
while widering, some column with non-exist data(NA) will alse be included, 
so na.omit NAs to restore dataset
```{r}
dt_longer1 <- dt_wider1 %>%
                  pivot_longer(
                    cols = matches("_"),
                    names_to = c("Task","Encoder","Year"),
                    names_pattern = "(.*)_(.*)_(.*)", # pattern order is -> "Task","Encoder","Year"
                    values_to = "Score"
                  ) %>%
                  arrange(Model) %>%
                  na.omit()
dt_longer1
```

store the items of Task as columns
```{r}
dt_longer1_2 <- dt_wider1 %>%
                  pivot_longer(
                    cols = matches("_"),
                    names_to = c(".value","Encoder","Year"),
                    names_pattern = "(.*)_(.*)_(.*)"
                    # values_to = "Score" # The items of the task will be stored in the column 
                                          # so there is no need to create a column name for the score
                  ) %>%
                  arrange(Model) %>%
                  na.omit()
dt_longer1_2
```

wider two columns only
```{r}
dt_wider2 <- dt %>%
                pivot_wider(
                  id_cols = c("Model","Task"),
                  names_from = c("Encoder","Year"),
                  values_from = "Score",
                  names_sep="_"
                ) 
dt_wider2
```

restore the wriderred dataset
```{r}
dt_longer2 <- dt_wider2 %>%
                  pivot_longer(
                    cols = matches("_"),
                    names_to = c("Encoder","Year"),
                    names_pattern = "(.*)_(.*)",
                    values_to = "Score"
                  ) %>%
                  arrange(Model) %>%
                  na.omit()
dt_longer2
```

